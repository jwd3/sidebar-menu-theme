<?xml version="1.0" encoding="UTF-8"?>
<record_update table="sp_header_footer">
    <sp_header_footer action="INSERT_OR_UPDATE">
        <client_script><![CDATA[function ($rootScope, $scope, snRecordWatcher, spUtil, $location, $uibModal, cabrillo, $timeout) {

	$scope.userID = $scope.user.sys_id;
	if (cabrillo.isNative())
		$scope.isViewNative = true;

	
	$scope.showTypeaheadSearch = false;
	
	$scope.openChatPopUp = function(evt) {
		$(evt.target).blur();
		var url = "$chat_support.do?queueID=" + $scope.data.connect_support_queue_id;
		var popup = window.open (url, "popup", "width=900, height=600");
	};
	
	
	$scope.collapseTypeaheadSearch = function(e) {
		$scope.showTypeaheadSearch = false;
		$('.navbar-action-search input[name="q"]').val('');
	};	
	
	$scope.expandTypeaheadSearch = function(e) {
		$scope.showTypeaheadSearch = true;
		$timeout(function() {
			$('.navbar-action-search input[name="q"]').focus();
		});
	};		
	
	$scope.toggleTypeaheadSearch = function(e) {
		
		var x = $scope.showTypeaheadSearch ? $scope.collapseTypeaheadSearch(e) :$scope.expandTypeaheadSearch(e);
	};	
	
	$('.navbar-action-search').focusout(function() {
		$scope.collapseTypeaheadSearch();
	});
	
	$rootScope.$on('$locationChangeSuccess', function(e, newUrl, oldUrl) {
		$scope.collapseTypeaheadSearch();
		$('.navbar-action-search input[name="q"]').val('');
	});
}]]></client_script>
        <controller_as>c</controller_as>
        <css>$logo-height: 25px;
$navbar-height: $logo-height * 3;

// Left Nav
$left-menu-bg-color: #444;
$left-menu-hover-color: #000;
$left-menu-border-color: #D3D3D3;
$left-menu-border: 1px solid $left-menu-border-color;
$left-menu-text-color: #FFF;
$left-menu-grey: #AAAAAA;
$left-menu-base-padding: 20px;

.navbarDiv {
  background-color: $navbar-inverse-bg;
  border-bottom: $left-menu-border;
}

.navbar-nav {
  
  float: none !important;
  
  &gt; li {
    float: none; 
  }
}

.topNavbar {
  padding: 0;
  margin: 0 0 0 $left-menu-width;
  border: none;
  border-radius: 0;
  z-index: 999;
  background-color: $navbar-inverse-bg;

  
  .menuToggleButton {
    background-color: $primary;
    border-color: $success;
    color: $navbar-inverse-bg;
  }

  @media (min-width: 992px) {

    &gt; .container-fluid {

      padding-right: 0px;
      display: inline-flex;
      width: 100%;
      vertical-align: top;
      height: $navbar-height;

      .navbar-header {
        display: inline-flex;
        align-items: stretch;
      }
    }

    &gt; .container-fluid div#headerMenu {

      padding-right: 0px;
      display: inline-flex !important;
      justify-content: space-between;
      flex-grow: 1;
      background-color: $navbar-inverse-bg;

      ul.navbar-nav {
        display: inline-flex;
        align-items: stretch;
        flex: 1;
        
        li {
          display: flex;
          border-bottom: 3px solid transparent;
          
          &amp;:hover {
            border-bottom: 3px solid $navbar-inverse-link-hover-color;
          }
          
          a {
           	display: flex;
            align-items: center;
          }
        }
      }
      
      #utilityMenu {

        display: flex;

        &gt; ul {
          
          li {
            
            &amp;.navbar-action-icon {
              align-items: center;
            }
            
            &amp;:hover {
              border-bottom: 3px solid transparent;
            }
          }
          
          @media (max-width: 991px) {
            #userOptionsDropdown {
              display: none;
            }
          }

          @media (min-width: 992px) {
            .mobile-option {
              display: none;

              &gt; a {
                padding-top: unset;
              }
            }  
          }
        }
      }
    }
  }
  
  
  @media (max-width: 991px) {

    margin: 0;
    min-height: 0;
    
    .collapse.in {
      display: block !important;
    }

    &gt; .container-fluid {

      .navbar-header {
        padding-left: 15px;
        padding-right: 15px;
      }

      div#headerMenu {

        .navbar-nav {
          margin: 0;
        }

        background-color: $left-menu-bg-color;

        li {
          text-transform: uppercase;

          a {
            color: $left-menu-text-color;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px 0 20px;
            min-height: 40px;

            &amp;.child-item {
              text-transform: none;
              padding-left: 30px;
              color: $left-menu-grey;
            }

            &amp;:hover, &amp;:focus {
              color: $left-menu-text-color;
              background-color: $left-menu-hover-color;
            }
          }
        }
      }
    }

    #utilityMenu {
      &gt; ul &gt; li.navbar-action-icon {
        display: none;
      }

      #userOptionsDropdown {
        display: none;
      }
    }
  }
}


.companyLogoContainer {

  background-color: $navbar-inverse-bg;
  padding: $logo-height;

  .companyLogo img {
    height: $logo-height;
    vertical-align: middle;
  }

  @media (min-width: 991px) {
    border-right: 1px solid #ddd;
    text-align: center;
  }
}

.leftContainer {

  @media (min-width: 992px) {
    position: fixed;
    top: 0px;
    left: 0px;
    bottom: 0px;
    z-index: 1000;
    width: 270px;
    color: $left-menu-text-color;
  }
  
  .userInfoContainer {

    @media (max-width: 991px) {
      display: none;
    }
    
    $uicHeight : 200px;
    min-height: $uicHeight;
    text-align: center;
    background-color: $left-menu-bg-color;

    &gt; div {
      vertical-align:middle;
      line-height: normal;
    }
    
    span {
      display:block;
      padding-top: 20px;
    }
    
    .userName {
      display: block;
      padding: 35px 10px 0;
      font-size: 1.3em;
      text-transform: uppercase;
    }
    
    .userCompany {
      color: $left-menu-grey;
    }
  }

  #menuItems {

    @media (min-width: 992px) {

      background-color: $left-menu-bg-color;
      height: calc(100vh - 275px); /* $uicHeight &amp; header height */
      overflow: hidden;

      &amp;:hover {
        overflow-y: auto;
      }
    }

    #sidebar {
      width: 100%;
      
      ul:last-of-type {
        border-bottom: 1px solid $left-menu-grey;
      }
            
      
      @media (min-width: 992px) {
        li {
          
          min-height: 50px;
          display: flex;
          
          &amp;.parent-item, &amp;.single-item {
            border-top: 1px solid $left-menu-grey;
            text-transform: uppercase;
          }
          
          &amp;.parent-item {
            
          }
                    
          &gt; a {
            color: $left-menu-text-color;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 $left-menu-base-padding 0 $left-menu-base-padding;
                        
            &amp;.child-item {
              padding-left: $left-menu-base-padding + 10px;
              color: $left-menu-grey;
            }
            
            &amp;:hover, &amp;:focus {
              color: $left-menu-text-color;
              background-color: $left-menu-hover-color;
            }
          }
        }
      }
    }
  }
}



.navbar-action-search {
  display: table;

  .input-group {
    padding-bottom: 0px;

    input[name="q"] {
      width: 270px;
      border-color: $text-muted;
      border-radius: 3px;
      float: right;
      color: $text-muted;
    }

    ul.dropdown-menu {
      min-width: 110%;

      a.ta-item {
        line-height: 20px;
        font-size: 14px;
        white-space: normal;

        i.ta-icon, span {
          display: table-cell;
        }

        span {
          vertical-align: top;
        }
      }
    }

    span.input-group-btn {
      float: left;

      button {
        background-color: inherit;
        border: none;
        color: inherit;
        outline: none;
        margin-right: 10px;
        padding-top: 8px;
      }      	      
    }      
  }
}





@media (max-width: 991px) {

  .navbar-header {
    float: none;
  }

  .navbar-toggle {
    display: block;
  }
  .navbar-collapse.collapse {
    display: none !important;
  }
}</css>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>false</has_preview>
        <id>dell-left-nav-header</id>
        <internal>false</internal>
        <link><![CDATA[function(scope, element) {
	$(element).on('click.nav','.navbar-collapse.in',function(e) {
		var target = $(e.target);
		if (target.is('a')) {
			// collapse mobile nav if clicked an anchor
			$(this).removeClass('in').addClass('collapse');
			return;
		}

		if (target.parent().hasClass("toggle-dropdown")) {
			// collapse mobile nav if parent has toggle-dropdown class
			$(this).removeClass('in').addClass('collapse');
			return;
		}

		// if neither target nor parent is an anchor, do nothing
		if (!target.parent().is('a'))
			return;

		// collapse mobile nav if target is part of a submenu
		if (target.parents("ul.dropdown-menu").length > 0)
			$(this).removeClass('in').addClass('collapse');
	});
	
	
	$(element).on('click','.parent-item',function(e) {
		var target = $(e.target);
		var i = target.find('i.fa');
		i.toggleClass('fa-caret-up fa-caret-down');
	});
}]]></link>
        <name>Dell Header With Left Nav</name>
        <option_schema/>
        <public>true</public>
        <roles/>
        <script><![CDATA[// Defines the support queue ID that will be linked to by the Live Chat link in header

data.connect_support_queue_id = $sp.getValue('sp_chat_queue');
data.login_page = $sp.getValue('login_page');
var menu = $sp.getValue("sp_rectangle_menu");
data.headerMenu = $sp.getWidgetFromInstance(menu);
if (data.headerMenu && data.headerMenu.data) {
	data.headerMenu.data.replace = true;
}


// Load the Left Nav Items
var qsConfig = $sp.getValue("quick_start_config");
var qsConfigJson = qsConfig ? JSON.parse(qsConfig)[0] : {};

if (qsConfigJson.leftNav) {
	
	data.leftNav = {};
	data.leftNav.items = $sp.getMenuItems(qsConfigJson.leftNav.sys_id);	
}


data.loginWidget = $sp.getWidgetFromInstance('login-modal');

data.optionsSearch = "{title: 'Search All Sources', limit: 10}";
data.typeahead = $sp.getWidget('typeahead-search', data.optionsSearch);]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_header_footer</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-09-27 00:38:23</sys_created_on>
        <sys_id>3fa52561dbfc23004e9a9235ca961928</sys_id>
        <sys_mod_count>250</sys_mod_count>
        <sys_name>Dell Header With Left Nav</sys_name>
        <sys_package display_value="Dell Portal" source="x_75086_dell_porta">c4942930db3023004e9a9235ca961992</sys_package>
        <sys_policy/>
        <sys_scope display_value="Dell Portal">c4942930db3023004e9a9235ca961992</sys_scope>
        <sys_update_name>sp_header_footer_3fa52561dbfc23004e9a9235ca961928</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-10-02 03:25:58</sys_updated_on>
        <template><![CDATA[<div class="navbarDiv">
  <nav class="navbar topNavbar" role="navigation">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle menuToggleButton" data-toggle="collapse" data-target="#headerMenu" aria-expanded="true">
          <span>Menu</span>
        </button>
        <div class="companyLogoContainer hidden-lg hidden-md">
          <a class="companyLogo" href="?id={{::portal.homepage_dv}}">
            <img ng-src="{{::portal.logo}}" alt="DellEMC" role="presentation" src="{{::portal.logo}}">
          </a>
        </div>
      </div>
      <div id="headerMenu" class="navbar-collapse collapse" aria-expanded="true" style="">
        <ul id="primaryMenu" class="nav navbar-nav">
          <sp-widget widget="data.headerMenu"></sp-widget>
        </ul>
        <div id="utilityMenu">
          <ul class="nav navbar-nav">
            <li class="navbar-action-icon" tabindex="0">
                <a><i ng-show="!showTypeaheadSearch" ng-click="toggleTypeaheadSearch($event)" class="fa fa-search navbar-action-search-icon" tabindex="0"/></a>
                <div ng-show="showTypeaheadSearch" ng-submit="collapseTypeaheadSearch($event)" class="navbar-action-icon navbar-action-search">
                    <sp-widget widget="data.typeahead"></sp-widget>
                </div>
            </li> 
            <ul ng-if="::user.logged_in" class="nav navbar-nav">
              <!-- chat, avatar, and logout -->
              <li ng-if="::data.connect_support_queue_id"><a href ng-click="openChatPopUp($event)">${Live Chat}</a></li>
              <li id="userOptionsDropdown" class="dropdown">
                <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown">
                  <span>{{::user.name}}</span>
                </a>
                <ul class="dropdown-menu">
                  <li><a ng-href="?id=csm_profile&sys_id={{::user.sys_id}}">${Profile}</a></li>
                  <li><a href="{{::portal.logoutUrl}}">${Logout}</a></li>
                </ul>
              </li>
              <li class="mobile-option"><a ng-href="?id=user_profile&sys_id={{::user.sys_id}}">${Profile}</a></li>
              <li class="mobile-option"><a href="{{::portal.logoutUrl}}">${Logout}</a></li>
            </ul>
          </ul>
        </div>
        <div class="leftContainer">
          <div class="companyLogoContainer hidden-xs hidden-sm">
            <div class="visible-md-inline-block visible-lg-inline-block">
              <a class="companyLogo" href="?id={{::portal.homepage_dv}}">
                <img ng-src="{{::portal.logo}}" alt="DellEMC" role="presentation">
              </a>
            </div>
          </div>
          <div class="userInfoContainer">
            <span><strong>Hello!</strong> Welcome back,</span> <span class='userName'>{{::user.name}}</span> <span class='userCompany'>Carnival Cruises</span>
          </div>

          <div id="menuItems">
            <div id="sidebar" role="navigation">
              <ul class="nav" ng-repeat-start="item in data.leftNav.items" ng-include="'dellLeftNavMenuTemplate'"></ul>
              <div ng-repeat-end></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </nav>
</div>]]></template>
    </sp_header_footer>
</record_update>
